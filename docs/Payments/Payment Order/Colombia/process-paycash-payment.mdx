import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';

# Process Paycash Payments

```jsx
  https://api-sandbox.epag.io/payment/MY_PAYMENT_TOKEN/sendPayment
```
## Paycash

Paycash is an Alternative Payment Method (APM) tailored predominantly for cash transactions, mirroring the operational framework of other APMs within the Latin American region.

The way Paycash works is quite straightforward:

- **Payment Transfer:**
  - A business generates a Paycash reference and shares it with the customer.
  - The customer enters their mobile banking details, along with the agreement number and the reference.
  - Once the payment is made, the business is notified immediately.

- **Cash Payment:**
  - Similarly, a business generates a Paycash reference for the customer.
  - The customer then visits any of the numerous payment points to make the payment.
  - The payment is processed, and the business is notified right away.

This method processes a **PAYCASH** payment order that were already created using the `Create Payment Order` method.


## Request Fields

- `method` (required/string): Payment method. Valid option: PAYCASH.
- `expiration_date` (optional/date/YYYY-MM-DD): Expiration date (if not informed system will assume 5 days of current date).

## Response Fields

- `payment_token` (string): Token to identify this payment.
- `refresh_token` (string): Updated access token for next calls.
- `transaction_status` (string): Status of this payment.
- `paycash_amount` (string): Amount of this payment.
- `paycash_barcode` (string): Text string containing the barcode.
- `paycash_barcode_image` (string): Base64 Zipped PNG representation of Paycash barcode.
- `paycash_instructions_link` (string): Link to access the payment instructions.

| AUTHORIZATION | API Key         | 
| ------------- | --------------- |
| Key           | X-Auth-Token    |
| Value         | MY_ACCESS_TOKEN |

### Body Raw(json)

```jsx title="json"
{
    "method": "PAYCASH",
    "expiration_date": "2024-05-09"
}
```

### Example Request

<Tabs>

  <TabItem value="success" label="200 - Success">
      #### Example Request
        ```jsx title="200 - Success"
            curl --location 'https://api-sandbox.epag.io/payment/MY_PAYMENT_TOKEN/sendPayment' \
            --header 'X-Auth-Token: MY_ACCESS_TOKEN' \
            --data '{
                "method": "PAYCASH",
                "expiration_date": "2024-05-09"
            }'
        ```

      #### Example Response
        ```jsx title="Header"
          Content-Type: application/json
        ```  
        ```jsx title="Body"
            {
              "transaction_status": "PROCESSING",
              "payment_token": "42afe884-f047-4452-a3db-65a7de76a9c5",
              "paycash_barcode": "2521709744061841",
              "paycash_amount": "123.45",
              "paycash_barcode_image": "BASE64_ZIPPED_PNG",
              "paycash_instructions_link": "",
              "refresh_token": "MY_ACCESS_TOKEN"
            }
        ```
    </TabItem>

    <TabItem value="unauthorized" label="401 - Unauthorized">
      #### Example Request
        ```jsx title="401 - Unauthorized"
            curl --location 'https://api-sandbox.epag.io/payment/MY_PAYMENT_TOKEN/sendPayment' \
            --header 'X-Auth-Token: INVALID_ACCESS_TOKEN' \
            --data '{
                "method": "PAYCASH",
                "expiration_date": "2024-05-09"
            }'
        ```

      #### Example Response
        ```jsx title="Header"
          Content-Type: application/json
        ```  
        ```jsx title="Body"
            {
              "timestamp": "2024-01-16T15:35:10.131+0000",
              "status": 401,
              "error": "Unauthorized",
              "message": "Access Denied",
              "path": "/payment/c6b2ff38-b53d-42dc-b11a-bce5cc05c253/sendPayment"
            }
        ```
    </TabItem>

    <TabItem value="bad-gateway" label="502 - Bad Gateway">
      #### Example Request
        ```jsx title="502 - Bad Gateway"
            curl --location 'https://api-sandbox.epag.io/payment/MY_PAYMENT_TOKEN/sendPayment' \
            --header 'X-Auth-Token: MY_ACCESS_TOKEN' \
            --data '{
                "method": "PAYCASH",
                "expiration_date": "2024-05-09"
            }'
        ```

      #### Example Response
        ```jsx title="Header"
          Content-Type: application/json
        ```  
        ```jsx title="Body"
            {
              "timestamp": "2024-01-16T20:12:28.156+0000",
              "status": 502,
              "error": "Bad Gateway",
              "message": "There was an issue when contacting an external API, please contact support",
              "path": "/payment/2f1c0103-b6fe-4e99-864c-d20c68b97a85/sendPayment",
              "errors": [
                {
                  "code": "00.03.0001",
                  "description": "There was an issue when contacting an external API, please contact support"
                }
              ],
              "refresh_token": "MY_ACCESS_TOKEN"
            }
        ```
    </TabItem>
    
</Tabs>